<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Apexo Manual</title>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
		/>

		<meta name="mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black" />
		<meta name="apple-mobile-web-app-title" content="Apexo" />
		<!-- Favicon -->
		<link rel="icon" type="image/png" href="https://web.apexo.app/favicon.png" />

		<style>
			/* Base Styles */
			html {
				background: #fafafa;
			}

			body {
				font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
					Oxygen, Ubuntu, Cantarell, sans-serif;
				margin: 0;
				padding: 0;
				background-color: #ffffff;
				color: #2c3e50;
				height: 100vh;
				max-width: 1200px;
				margin: 0 auto;
				background: #fafafa;
				display: flex;
				flex-direction: column;
			}

			/* Container for Nav and Main Content */
			.container {
				display: flex;
				flex: 1;
			}

			/* Navigation Styles */
			#nav {
				position: sticky;
				top: 75px;
				width: 290px;
				height: calc(100vh - 75px);
				box-sizing: border-box;
				overflow-y: auto;
				background-color: #fff;
				box-shadow: 0px 0 15px rgb(0 0 0 / 4%);
				margin-top: 0;
				margin-right: 0;
				direction: rtl;
				scrollbar-width: thin;
				scrollbar-color: #cbd5e0 #f9fafb;
			}

			#nav > * {
				direction: ltr;
			}

			#nav::-webkit-scrollbar {
				width: 8px;
			}

			#nav::-webkit-scrollbar-track {
				background: #f9fafb;
				border-radius: 4px;
			}

			#nav::-webkit-scrollbar-thumb {
				background: #cbd5e0;
				border-radius: 4px;
			}

			#nav::-webkit-scrollbar-thumb:hover {
				background: #a0aec0;
			}

			#nav .head {
				text-align: center;
				font-size: 17px;
				margin: 0;
				padding: 23px 0 24px;
				border: none;
				background-color: #ffffff;
				border-bottom: 1px solid #eaeaea;
				color: #4a5568;
				font-weight: 100;
			}

			#nav ul {
				list-style-type: none;
				padding: 0;
			}

			#nav > ul > li > a {
				text-decoration: none;
				color: #4a5568;
				font-weight: 500;
				display: block;
				padding: 8px 12px;
				border-radius: 6px;
				transition: all 0.2s ease;
				font-size: 15px;
				border-left: 2px solid #e3e3e3;
				border-radius: 0;
			}

			#nav ul li a:hover {
				background-color: #edf2f7;
				color: #2b6cb0;
				text-decoration: none;
			}

			/* Main Content Styles */
			main {
				flex: 1;
				padding: 40px;
				overflow-y: auto;
				box-sizing: border-box;
				line-height: 1.6;
				background: #fff;
				border: 1px solid #eaeaea;
				background-color: #f9fafb;
				box-shadow: 0px 0 15px rgb(0 0 0 / 6%);
				padding-top: 80px;
			}

			/* Top Bar Styles */
			.top-bar {
				position: fixed;
				top: 0;
				background: white;
				padding: 15px 20px;
				display: flex;
				justify-content: space-between;
				align-items: center;
				border-bottom: 1px solid #eaeaea;
				z-index: 100;
				overflow-x: hidden;
				width: calc(100% - 40px);
				left: 0;
				margin: 0;
			}

			.horizontal-nav {
				display: flex;
				gap: 5px;
			}

			.nav-item {
				text-decoration: none;
				color: #4a5568;
				font-weight: 500;
				padding: 8px 16px;
				border-radius: 6px;
				transition: all 0.2s ease;
			}

			.nav-item:hover {
				background-color: #edf2f7;
				color: #2b6cb0;
			}

			.nav-item.active {
				background-color: #2b6cb0;
				color: white;
			}

			/* Search Container Styles */
			.search-container {
				display: flex;
				flex-grow: 0.9;
				align-items: center;
				background: #f1f5f9;
				border-radius: 8px;
				padding: 6px 12px;
			}

			#searchInput {
				border: none;
				background: none;
				padding: 8px;
				width: 150px;
				font-size: 14px;
				outline: none;
				flex-grow: 1;
			}

			.search-btn {
				background: none;
				border: none;
				cursor: pointer;
				padding: 6px;
				color: #4a5568;
				display: flex;
				align-items: center;
			}

			.search-btn:hover {
				color: #2b6cb0;
			}

			/* Responsive Styles */
			@media screen and (max-width: 768px) {
				.horizontal-nav {
					display: none;
				}
				.top-bar {
					flex-direction: column;
					gap: 15px;
				}

				.search-container {
					width: 100%;
				}

				#searchInput {
					width: 100%;
				}

				#nav {
					position: fixed;
					left: -400px;
					top: 0;
					height: 100vh;
					transition: left 0.3s ease !important;
					z-index: 999;
					box-shadow: 32px 0px 150px 0px #00000069;
				}

				#nav.active {
					left: 0;
				}

				.menu-toggle {
					display: block !important;
				}

				.menu-toggle.active span:nth-child(1) {
					transform: rotate(45deg) translate(5px, 5px);
				}

				.menu-toggle.active span:nth-child(2) {
					opacity: 0;
				}

				.menu-toggle.active span:nth-child(3) {
					transform: rotate(-45deg) translate(7px, -7px);
				}
			}

			/* Typography Styles */
			h1,
			h2,
			h3 {
				color: #2d3748;
				border-bottom: 2px solid #e2e8f0;
				padding-bottom: 8px;
				margin-top: 2em;
			}

			/* Code Block Styles */
			pre {
				background: #f8fafc;
				padding: 20px;
				border-radius: 8px;
				border-left: 4px solid #4299e1;
				overflow-x: auto;
				margin: 20px 0;
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
			}

			code {
				font-family: "Fira Code", Consolas, Monaco, monospace;
				font-size: 0.9em;
			}

			/* Image Styles */
			img {
				max-width: 300px;
				width: 100%;
				cursor: pointer;
				transition: transform 0.3s ease, box-shadow 0.3s ease;
				display: block;
				margin: 40px auto;
				border: none;
				border-radius: 8px;
				box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			}

			img:hover {
				transform: scale(1.03);
				box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
			}

			#logo:hover {
				transform: none;
				cursor: default;
			}

			/* Blockquote Styles */
			blockquote {
				border-radius: 7px;
				padding: 10px;
				border: 1px solid #1a365d;
				border-left-width: 9px;
				margin-bottom: 20px;
				background-color: #fff;
				margin: 10px;
			}

			/* Menu Toggle Styles */
			.menu-toggle {
				display: none;
				position: fixed;
				top: 5px;
				right: 10px;
				z-index: 1000;
				background: none;
				border: none;
				cursor: pointer;
				padding: 7px;
				border-radius: 15px;
			}

			.menu-toggle span {
				display: block;
				width: 25px;
				height: 3px;
				margin: 5px 0;
				background: #2b6cb0;
				transition: all 0.3s ease;
			}

			/* Logo Container Styles */
			.logo-container h5 {
				margin: 0;
				font-weight: 100;
				letter-spacing: 0.07em;
			}

			#logo {
				height: 25px;
				margin: 0;
				box-shadow: none;
				width: unset;
				display: inline;
			}

			.no-result {
				padding: 20px;
				text-align: center;
				color: rgb(74, 85, 104);
				display: none;
				background: #fff;
				border: 2px solid #e3e3e3;
				font-weight: 600;
				border-radius: 5px;
			}
		</style>
	</head>
	<body>
		<button id="menuToggle" class="menu-toggle">
			<span></span>
			<span></span>
			<span></span>
		</button>
		<div class="container">
			<div id="nav">
				<ul id="toc">
					<li>Loading...</li>
				</ul>
			</div>
			<main id="content">
				<div class="top-bar">
					<img id="logo" src="./logo.png" />
					<div class="search-container">
						<input
							type="text"
							id="searchInput"
							placeholder="Search documentation..."
						/>
						<button class="search-btn">
							<svg
								width="20"
								height="20"
								viewBox="0 0 24 24"
								fill="none"
								stroke="currentColor"
							>
								<circle cx="11" cy="11" r="8"></circle>
								<line x1="21" y1="21" x2="16.65" y2="16.65"></line>
							</svg>
						</button>
					</div>
					<div class="horizontal-nav">
						<a href="https://apexo.app/#getting-started" class="nav-item active"
							>Download</a
						>
						<a href="https://github.com/alselawi/apexo-flutter" class="nav-item"
							>Github</a
						>
						<a href="https://demo.apexo.app" class="nav-item">Demo</a>
						<a href="https://apexo.app/changelog" class="nav-item">Changelog</a>
					</div>
				</div>
				<div id="main-content">
					<p>Loading documentation...</p>
				</div>
			</main>
		</div>

		<script>
			function setupSearch() {
				const searchInput = document.getElementById("searchInput");
				const mainContent = document.getElementById("main-content");

				const noResultsNotice = document.createElement("div");
				noResultsNotice.classList.add("no-result");
				noResultsNotice.innerHTML = "No matching results found";
				mainContent.appendChild(noResultsNotice);

				searchInput.addEventListener("input", (e) => {
					const searchTerm = e.target.value.toLowerCase();
					const headers = mainContent.querySelectorAll("h1, h2, h3, h4, h5");
					const contentSections = mainContent.querySelectorAll(
						"p, li, code, blockquote, pre"
					);

					// Reset all content visibility
					headers.forEach((header) => (header.style.display = "block"));
					contentSections.forEach(
						(section) => (section.style.display = "block")
					);

					if (searchTerm.length < 2) {
						let hasResults = true;
						return;
					}

					let hasResults = false;

					// Search through headers and content
					headers.forEach((header) => {
						const text = header.textContent.toLowerCase();
						const isVisible = text.includes(searchTerm);
						header.style.display = isVisible ? "block" : "none";
						if (isVisible) hasResults = true;
					});

					contentSections.forEach((section) => {
						const text = section.textContent.toLowerCase();
						const isVisible = text.includes(searchTerm);
						section.style.display = isVisible ? "block" : "none";
						if (isVisible) hasResults = true;
					});

					noResultsNotice.style.display = hasResults ? "none" : "block";
				});

				// Add search button click handler
				document.querySelector(".search-btn").addEventListener("click", () => {
					searchInput.focus();
				});
			}

			async function fetchMarkdown() {
				const markdownUrl =
					"https://raw.githubusercontent.com/alselawi/apexo-flutter/master/manual.md";

				try {
					const response = await fetch(markdownUrl);
					if (!response.ok) {
						throw new Error(`HTTP error! status: ${response.status}`);
					}

					const markdownText = await response.text();
					const html = marked.marked(markdownText); // Convert Markdown to HTML
					const contentElement = document.getElementById("main-content");
					contentElement.innerHTML = html;

					generateTableOfContents(html);
					setupSearch();
				} catch (error) {
					document.getElementById(
						"content"
					).innerHTML = `<p>Error loading documentation: ${error.message}</p>`;
				}

				const images = document.querySelectorAll("img");
				images.forEach((img, index) => {
					if (index == 0) return;
					img.addEventListener("click", () => {
						const lightbox = document.createElement("div");
						lightbox.style =
							"position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; justify-content: center; align-items: center; z-index: 1000;";

						const fullImg = document.createElement("img");
						fullImg.src = img.src;
						fullImg.style =
							"max-width: 90%; max-height: 90%; object-fit: contain;";

						lightbox.appendChild(fullImg);
						document.body.appendChild(lightbox);

						lightbox.addEventListener("click", () => {
							lightbox.remove();
						});
					});
				});
			}

			function generateTableOfContents(html) {
				const contentElement = document.getElementById("content");
				const headers = contentElement.querySelectorAll("h1, h2, h3, h4, h5");
				const toc = document.getElementById("toc");

				toc.innerHTML = "";

				headers.forEach((header, index) => {
					const id = `section-${index}`;
					header.id = id;

					const listItem = document.createElement("li");
					const link = document.createElement("a");
					link.href = `#${id}`;
					link.textContent = header.textContent;

					// Add indentation based on header level
					const level = parseInt(header.tagName.charAt(1));
					listItem.style.paddingLeft = `${(level - 1) * 20}px`;

					listItem.appendChild(link);
					toc.appendChild(listItem);
				});

				document.getElementById("toc").addEventListener("click", (e) => {
					if (e.target.tagName === "A") {
						const nav = document.querySelector("#nav");
						const menuToggle = document.getElementById("menuToggle");
						nav.classList.remove("active");
						menuToggle.classList.remove("active");
						setTimeout(() => {
							window.scrollTo({
								top:
									document.getElementById(e.target.hash.slice(1)).offsetTop -
									100,
								behavior: "smooth",
							});
						}, 100);
					}
				});
			}

			// Load the Markdown parser library
			const script = document.createElement("script");
			script.src = "https://cdn.jsdelivr.net/npm/marked/marked.min.js";
			script.onload = fetchMarkdown;
			document.head.appendChild(script);
		</script>

		<script>
			const menuToggle = document.getElementById("menuToggle");

			menuToggle.addEventListener("click", () => {
				const nav = document.querySelector("#nav");
				nav.classList.toggle("active");
				menuToggle.classList.toggle("active");
			});

			// Close menu when clicking outside
			document.addEventListener("click", (e) => {
				const nav = document.querySelector("#nav");
				if (!nav.contains(e.target) && !menuToggle.contains(e.target)) {
					nav.classList.remove("active");
					menuToggle.classList.remove("active");
				}
			});
		</script>
	</body>
</html>
